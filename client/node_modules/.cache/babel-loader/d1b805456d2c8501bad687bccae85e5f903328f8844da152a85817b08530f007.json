{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tadapanenitriveni/Downloads/MERN-Recipe-App-main 2/MERN-Recipe-App-main 2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tadapanenitriveni/Downloads/MERN-Recipe-App-main 2/MERN-Recipe-App-main 2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tadapanenitriveni/Downloads/MERN-Recipe-App-main 2/MERN-Recipe-App-main 2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useGetUserID}from\"../hooks/useGetUserID\";import axios from\"axios\";import{useCookies}from\"react-cookie\";import{SearchBar}from\"./../components/SearchBar\";import{SearchResultsList}from\"./../components/SearchResultsList\";import'./../components/SearchBar.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Home=function Home(){var _useCookies=useCookies([\"access_token\"]),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],removeCookie=_useCookies2[2];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recipes=_useState2[0],setRecipes=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),savedRecipes=_useState4[0],setSavedRecipes=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),queryName=_useState6[0],setQueryName=_useState6[1];var userID=useGetUserID();useEffect(function(){var fetchRecipes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:3001/recipes\");case 3:response=_context.sent;setRecipes(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchRecipes(){return _ref.apply(this,arguments);};}();var fetchSavedRecipes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"http://localhost:3001/recipes/savedRecipes/ids/\".concat(userID));case 3:response=_context2.sent;setSavedRecipes(response.data.savedRecipes);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchSavedRecipes(){return _ref2.apply(this,arguments);};}();fetchRecipes();if(cookies.access_token){fetchSavedRecipes();}},[]);var saveRecipe=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(recipeID){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.put(\"http://localhost:3001/recipes\",{recipeID:recipeID,userID:userID});case 3:response=_context3.sent;setSavedRecipes(response.data.savedRecipes);_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function saveRecipe(_x){return _ref3.apply(this,arguments);};}();var isRecipeSaved=function isRecipeSaved(id){return savedRecipes.includes(id);};var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),results=_useState8[0],setResults=_useState8[1];var displayedRecipes=results.length>0?results:recipes;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar-container\",children:[/*#__PURE__*/_jsx(SearchBar,{setResults:setResults}),results&&results.length>0&&/*#__PURE__*/_jsx(SearchResultsList,{setQueryName:setQueryName,results:results})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Recipes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\",gap:'15px'},children:displayedRecipes.map(function(recipe,idx){return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{width:\"300px\"},children:[/*#__PURE__*/_jsx(\"img\",{style:{height:\"200px\"},src:recipe.imageUrl,alt:recipe.name,className:\"card-img-top\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:recipe.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text-1\",children:recipe.ingredients.join()}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:recipe.instructions}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Cooking Time: \",recipe.cookingTime,\" minutes\"]}),cookies.access_token?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return saveRecipe(recipe._id);},disabled:isRecipeSaved(recipe._id),children:isRecipeSaved(recipe._id)?\"Saved\":\"Save\"}):/*#__PURE__*/_jsx(_Fragment,{})]})]},idx);})})})]});};","map":{"version":3,"names":["React","useEffect","useState","useGetUserID","axios","useCookies","SearchBar","SearchResultsList","Home","cookies","removeCookie","recipes","setRecipes","savedRecipes","setSavedRecipes","queryName","setQueryName","userID","fetchRecipes","get","response","data","console","log","fetchSavedRecipes","access_token","saveRecipe","recipeID","put","isRecipeSaved","id","includes","results","setResults","displayedRecipes","length","display","flexWrap","gap","map","recipe","idx","width","height","imageUrl","name","ingredients","join","instructions","cookingTime","_id"],"sources":["/Users/tadapanenitriveni/Downloads/MERN-Recipe-App-main 2/MERN-Recipe-App-main 2/client/src/pages/home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useGetUserID } from \"../hooks/useGetUserID\";\nimport axios from \"axios\";\nimport { useCookies } from \"react-cookie\";\n\nimport { SearchBar } from \"./../components/SearchBar\";\nimport { SearchResultsList } from \"./../components/SearchResultsList\";\nimport './../components/SearchBar.css'\n\nexport const Home = () => {\n  const [cookies, , removeCookie] = useCookies([\"access_token\"]);\n  const [recipes, setRecipes] = useState([]);\n  const [savedRecipes, setSavedRecipes] = useState([]);\n  const [queryName, setQueryName] = useState('');\n\n  const userID = useGetUserID();\n\n  useEffect(() => {\n    const fetchRecipes = async () => {\n      try {\n        const response = await axios.get(\"http://localhost:3001/recipes\");\n        setRecipes(response.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    const fetchSavedRecipes = async () => {\n      try {\n        const response = await axios.get(\n          `http://localhost:3001/recipes/savedRecipes/ids/${userID}`\n        );\n        setSavedRecipes(response.data.savedRecipes);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    fetchRecipes();\n    if (cookies.access_token) {\n      fetchSavedRecipes();\n    }\n  }, []);\n\n  \n  const saveRecipe = async (recipeID) => {\n    try {\n      const response = await axios.put(\"http://localhost:3001/recipes\", {\n        recipeID,\n        userID,\n      });\n      setSavedRecipes(response.data.savedRecipes);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const isRecipeSaved = (id) => savedRecipes.includes(id);\n\n  const [results, setResults] = useState([]);\n\n  const displayedRecipes = results.length > 0 ? results : recipes;\n  \n  return (\n    <div>\n      <div className=\"search-bar-container\">\n        <SearchBar setResults={setResults} />\n        {results && results.length > 0 && <SearchResultsList setQueryName={setQueryName} results={results} />}\n      </div>\n      \n      <h1 className=\"text-center\">Recipes</h1>\n      <div className=\"container\">\n        \n        <div style={{display:\"flex\", flexWrap:\"wrap\", gap:'15px'}}>\n          {\n            displayedRecipes.map((recipe, idx) => (\n              <div key={idx} className=\"card\" style={{width: \"300px\"}}>\n                <img style={{height:\"200px\"}} src={recipe.imageUrl} alt={recipe.name} className=\"card-img-top\"/>\n                <div className=\"card-body\">\n                  <h5 className=\"card-title\">{recipe.name}</h5>\n                  <p className=\"card-text-1\">{recipe.ingredients.join()}</p>\n                  <p className=\"card-text\">{recipe.instructions}</p>\n                  <p>Cooking Time: {recipe.cookingTime} minutes</p>\n                  {\n                    cookies.access_token ?\n                    <button\n                      className=\"btn btn-primary\"\n                      onClick={() => saveRecipe(recipe._id)}\n                      disabled={isRecipeSaved(recipe._id)}\n                    >\n                      {isRecipeSaved(recipe._id) ? \"Saved\" : \"Save\"}\n                    </button>\n                    :\n                    <></>\n                  }\n                </div>\n              </div>\n            ))\n          }\n\n        </div>\n      </div>\n    </div>\n\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}